{% use "bootstrap_4_layout.html.twig" %}

{% block fieldset_widget %}
    <fieldset {{ block('widget_container_attributes') }}>
        {% if legend is defined and legend is not empty %}
            <legend>{{ legend | trans({}, translation_domain) }}</legend>
        {% endif %}
        {{ form_widget(form) }}
    </fieldset>
{% endblock %}

{% block collection_widget %}
	{% if prototype is defined and allow_add %}
		{% set attr = attr | merge({
			'data-prototype': block('collection_item_widget') | replace({'"': "'", "\n": "", "\t": ""})
		}) %}
	{% endif %}
	<fieldset class="FieldCollection" {{ block('widget_container_attributes') }}>
		<legend>
            {{ label }}
			{%- if allow_add -%}
				<div class="btn btn-primary btn-xs BtnCollectionAdd">
					<i class="glyphicon glyphicon-plus"></i>
					<span>Ajouter</span>
				</div>
			{%- endif -%}
        </legend>
        {{- block('collection_widgetnormal') -}}
    </fieldset>
{% endblock %}

{% block collection_item_widget %}
    {{- block('collection_item_widgetnormal') -}}
{% endblock %}

{% block collection_item_widgetnormal %}
	{% set prefixe2 = form.vars.block_prefixes.2 %}
	<tr class="CollectionRow">
		{% for input in prototype %}
			<td>
				{{ form_widget(input) }}
			</td>
		{% endfor %}
		{% if allow_delete %}
			<td class="text-center">
				<div class="btn btn-danger btn-xs BtnCollectionDelete" title="Supprimer">
					<i class="glyphicon glyphicon-white glyphicon-remove"></i>
                    Supprimer
				</div>
			</td>
		{% endif %}
	</tr>
{% endblock %}

{% block collection_widgetnormal %}
	{% set prefixe2 = form.vars.block_prefixes.2 %}
	<table class="table table-striped table-bordered table-condensed">
		{% if prototype is defined %}
			{% set labels = prototype %}
		{% else %}
			{% set labels = form[0] %}
		{% endif %}
        <thead>
            {% for input in labels %}
                <th>
                    {{ form_label(input) }}
                </th>
            {% endfor %}
            {% if allow_delete  %}
                <th>
                    <label>Actions</label>
                </th>
            {% endif %}
        </thead>
		<tbody class="TabCollection TabCollection">
			{% for i, row in form %}
				<tr class="CollectionRow">
					{% for input in row %}
						<td>
							{{ form_widget(input) }}
						</td>
					{% endfor %}
                    {% if allow_delete %}
                        <td class="text-center">
                            <div class="btn btn-danger btn-xs BtnCollectionDelete" title="Supprimer">
                                <i class="fas fa-trash-alt"></i>
                            </div>
                        </td>
                    {% endif %}
				</tr>
			{% endfor %}
		</tbody>
	</table>
{% endblock %}
